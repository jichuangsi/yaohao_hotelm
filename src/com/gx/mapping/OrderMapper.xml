<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.gx.dao.OrderDao" >
  <resultMap id="BaseResultMap" type="com.gx.po.OrderPo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Oct 16 19:18:30 CST 2016.
    -->
    <constructor >
      <idArg column="id" jdbcType="INTEGER" javaType="java.lang.Integer" />
      <arg column="orderID" jdbcType="VARCHAR" javaType="java.lang.String" />
      <arg column="status" jdbcType="INTEGER" javaType="java.lang.Integer" />
       <arg column="platformId" jdbcType="VARCHAR" javaType="java.lang.String" />
        <arg column="stayDetailsId" jdbcType="INTEGER" javaType="java.lang.Integer" />
        <arg column="predeterID" jdbcType="INTEGER" javaType="java.lang.Integer" />
    </constructor>
  </resultMap>


  <!--   新增 -->
  <insert id="inserAll" parameterType="com.gx.po.OrderPo" >
     INSERT INTO `order` (orderID,status,platformId,stayDetailsId,predeterID)
     values (#{orderID,jdbcType=INTEGER},#{status,jdbcType=VARCHAR}
     ,#{platformId,jdbcType=INTEGER},#{stayDetailsId,jdbcType=INTEGER}
     ,#{predeterID,jdbcType=INTEGER})
  </insert>

  <!--修改 -->
    <update id="upadeStatus" parameterType="com.gx.po.OrderPo">
      UPDATE `order`
        SET status=#{status,jdbcType=VARCHAR}
                   WHERE orderID = #{orderID,jdbcType=INTEGER}
   </update>
    <update id="updateStatuaByCS" parameterType="com.gx.po.OrderPo">
      UPDATE `order`
        SET status=#{status,jdbcType=VARCHAR},
            stayDetailsId=#{stayDetailsId,jdbcType=INTEGER}
                   WHERE orderID = #{orderID,jdbcType=INTEGER}
   </update>

<select id="selectStatua" resultType="com.gx.po.OrderPo">
   SELECT o.*,p.name AS pname
	FROM `order` o
	INNER JOIN platform p ON o.platformId=p.id
	WHERE orderID=#{orderID,jdbcType=VARCHAR}
</select>

    <select id="listAll" resultType="com.gx.po.OrderPo">
       SELECT o.*,p.name AS pname
        FROM `order` o
        INNER JOIN `platform` p ON o.platformId=p.id
        WHERE orderID like CONCAT('%',#{orderID,jdbcType=VARCHAR},'%')
         limit #{start},#{pageSize}
    </select>

    <select id="countFuzzyselect" resultType="java.lang.Integer">
      select count(*) from `order`
    WHERE orderID like CONCAT('%',#{orderID,jdbcType=VARCHAR},'%')
  </select>

    <delete id="deletedorder" parameterType="java.lang.String">
      DELETE FROM `order` WHERE orderID = #{orderID,jdbcType=VARCHAR}
  </delete>


    <select id="selectBypredetermineID" resultType="java.lang.String">
        SELECT orderID FROM `order` WHERE `predeterID`=#{predeterID，jdbc=INTEGER}
    </select>

    <select id="codeNumberYZ" resultType="java.lang.Integer">
        SELECT COUNT(*) FROM `order` WHERE orderID= #{orderID,jdbcType=VARCHAR}
    </select>
    <select id="byID" resultType="com.gx.po.OrderPo">
          SELECT o.*,p.name AS pname
            FROM `order` o
            INNER JOIN `stayregisterdetails` ss ON ss.id=o.`stayDetailsId`
            INNER JOIN `platform` p ON o.`platformId`=p.id
            WHERE ss.`stayRegisterID`=#{id，jdbc=INTEGER}
    </select>
    <select id="selectBypredeID" resultType="com.gx.po.OrderPo">
          SELECT * FROM `order` WHERE `predeterID`=#{predeterID，jdbc=INTEGER}
    </select>
</mapper>